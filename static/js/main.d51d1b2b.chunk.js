(this["webpackJsonpreact-sea-battle"]=this["webpackJsonpreact-sea-battle"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),s=n(5),r=n.n(s),c=(n(14),n(1)),o=n(2),h=n(3),l=n(7),u=n(6),p=n(8);function m(e){var t,n=e.x,i=e.y,s=e.containsShip,r=e.shot,c=e.isShipVisible,o=0===n,h=0===i;return t=s?r?"X":"":r?"\xb7":"",a.a.createElement("button",{className:"square ".concat(s&&c?"visibleShip":""),onClick:e.onClick},a.a.createElement("div",{className:"marker"},t),o?a.a.createElement("span",{className:"leftLine"},["1","2","3","4","5","6","7","8","9","10"][i]):"",h?a.a.createElement("span",{className:"topLine"},["\u0410","\u0411","\u0412","\u0413","\u0414","\u0415","\u0416","\u0417","\u0418","\u041a"][n]):"")}function d(e){var t=e.row;return a.a.createElement("div",{className:"field-row"},t.map((function(t,n){return a.a.createElement(m,{key:n,x:t.x,y:t.y,containsShip:t.containsShip,shot:t.shot,isShipVisible:t.isShipVisible,onClick:function(){return e.onClick(t.y,t.x)}})})))}function y(e){var t=e.fieldMap;return a.a.createElement("div",{className:"field ".concat(e.whose?e.whose:"")},t.map((function(t,n){return a.a.createElement(d,{key:n,row:t,onClick:function(t,n){return e.onClick(t,n)}})})))}function f(e){return a.a.createElement("div",{className:"gamelog"},a.a.createElement("div",{className:"gamelog-header"},"\u041b\u043e\u0433\u0438 \u0438\u0433\u0440\u044b"),a.a.createElement("ul",{className:"gamelog-list"},e.logs.map((function(e,t){return a.a.createElement("li",{key:t},"".concat(0===t?"":String(t)+"."," ").concat(e))}))))}var v=function(e,t){switch(t.direction){case"right":for(var n=t.startSquare.x-1;n<t.startSquare.x-1+t.size;n++)e[t.startSquare.y-1][n].containsShip=!0,e[t.startSquare.y-1][n].shipId=t.id;break;case"down":for(var i=t.startSquare.y-1;i<t.startSquare.y-1+t.size;i++)e[i][t.startSquare.x-1].containsShip=!0,e[i][t.startSquare.x-1].shipId=t.id}},S=function(){function e(t,n,i){Object(o.a)(this,e),this.size=t,this.startSquare=n,this.direction=i,this.id=e.incrementId(),this.hitpoints=this.size}return Object(h.a)(e,null,[{key:"incrementId",value:function(){return this.latestId?this.latestId++:this.latestId=1,this.latestId}}]),e}(),g=[];g.push(new S(4,{y:1,x:1},"right")),g.push(new S(3,{y:3,x:2},"down")),g.push(new S(3,{y:4,x:7},"down")),g.push(new S(2,{y:8,x:4},"right")),g.push(new S(2,{y:10,x:1},"right")),g.push(new S(2,{y:10,x:7},"right")),g.push(new S(1,{y:3,x:10},"right")),g.push(new S(1,{y:5,x:4},"right")),g.push(new S(1,{y:6,x:10},"right")),g.push(new S(1,{y:10,x:10},"right"));var b=g,w=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={enemyField:[],enemyShips:Object(c.a)(b),areEnemyShipsInvisible:!0,gameOver:!1,logs:["\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u0445\u043e\u0434\u0430..."]};for(var i=0;i<10;i++)n.state.enemyField.push([]);for(var a=0;a<10;a++)for(var s=0;s<10;s++)n.state.enemyField[a].push({x:s,y:a,containsShip:!1,shot:!1,isShipVisible:!1,shipId:null});return n.state.enemyShips.forEach((function(e){v(n.state.enemyField,e)})),n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"handleClick",value:function(e,t){this.state.enemyField[e][t].shot||this.state.gameOver||this.setState((function(n){var i=Object(c.a)(n.enemyField);i[e][t].shot=!0,i[e][t].isShipVisible=!0;var a=Object(c.a)(n.enemyShips),s=Object(c.a)(n.logs),r=!1;if(i[e][t].containsShip){var o=a.find((function(n){return n.id===i[e][t].shipId}));o.hitpoints--,o.hitpoints>0?s.push("\u041f\u043e\u043f\u0430\u0434\u0430\u043d\u0438\u0435!"):s.push("\u041a\u043e\u0440\u0430\u0431\u043b\u044c \u0443\u043d\u0438\u0447\u0442\u043e\u0436\u0435\u043d!"),a.every((function(e){return 0===e.hitpoints}))&&(s.push("\u0418\u0433\u0440\u0430 \u043e\u043a\u043e\u043d\u0447\u0435\u043d\u0430."),r=!0)}else s.push("\u041c\u0438\u043c\u043e!");return{enemyField:i,enemyShips:a,gameOver:r,logs:s}}))}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"game"},a.a.createElement(y,{whose:"enemy",fieldMap:this.state.enemyField,onClick:function(t,n){return e.handleClick(t,n)}}),a.a.createElement(f,{logs:this.state.logs}))}}]),t}(a.a.Component);r.a.render(a.a.createElement(w,null),document.getElementById("root"))},9:function(e,t,n){e.exports=n(15)}},[[9,1,2]]]);
//# sourceMappingURL=main.d51d1b2b.chunk.js.map